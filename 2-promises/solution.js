/*
INSTRUCTIONS

1. using promise API, i.e. only .then() .catch() and .finally() methods, consume the methods in firstnames.js and lastnames.js
2. don't use any async/await here
3. lastnames.js method expects a positive integer id, it returns a lastname, if the id is multiple of 5 it returns a nonexistent lastname
4. firstnames.js method expects a lastname generated by the method above, it returns a name
5. methods should be consumed sequentially, i.e. lastnames method first, and its results will serve as argument for firstnames method
6. implement a randomizing logic that provides you an id for lastnames method,
this value type must be a positive integer between 0-100, or something that is not a positive integer
The point here is getting correct and incorrect values to get successful and failing promises results from lastnames method

Example:
const id = yourRandomMethod() //first run
 -- id gets a value of undefined, or you can get a null, boolean, string, whatever different to a positive integer

const id = yourRandomMethod() //second run
 -- id gets a value of 31

const id = yourRandomMethod() //third run
-- id gets a value of 10

6. use promise chaining accordingly, don't forget error handling
7. log the resultant fullname, or the error, at the end
*/

const process = require('node:process')
const firstnames = require('./firstnames');
const lastnames = require('./lastnames');

function solution() {
    const id = randomId();

    console.log(`ID: ${id}`);
    // Lastname callback
    lastnames(id).then(lname => {
        // For the sake of printing it same as the example I used stdout.write
        process.stdout.write(`${lname}, `);

        // Firstname callback
        firstnames(lname).then(fname => {
            process.stdout.write(`${fname}\n`);
        }).catch(error => console.log(error.message));

    }).catch(error => console.log(error.message));
    
    // NOTE: The randomId() function tends to be very.. unlucky. Please spam it until you see all the cases.
    // randomizing logic that provides an id for lastnames method
    function randomId() { 
        const desire = [1, -1];
        const choice = Math.floor(Math.random() * desire.length);
        return (Math.floor(Math.random() * 2)) ? 
            Math.floor(Math.random() * 101) * desire[choice] : 
            Math.floor(Math.random() * 101) * desire[choice] + desire.toString(); // whatever different to a positive integer
    }
}

solution()
